pipeline {
    agent any
            
    
    stages {
        stage('Build alpcon') {
            
           steps {
	   	  sh '''chmod 777 docker
                 "docker build -t alpcon ."''' 
			                
            } 
        }
        stage('Check Container') {
            steps {
		sh'''
		if !(docker ps | grep alpcon)
		then docker run -it alpcon
		fi'''
		





            }
        }
        stage('Kiling Container') {   
         steps {
               	sh ''' docker stop $(docker ps -l -q)
		echo "The test was failed" '''

               
            }
        }
  
    }
}
